---
title: "Process and Clean - HPS"
format: pdf
editor: visual
---

# Load Raw Data and Packages

```{r}
#| label: load
#| message: false

library(dplyr)
library(tidyverse)

load("/home2/wburr/Shawn_Research/data/raw_data/raw_HPS.rda")
```

# Format Date + Time

```{r}
#| label: format_date

# format CallReceivedDateTime column as date and time
raw_HPS$CallReceivedDateTime <- as.POSIXlt(raw_HPS$CallReceivedDateTime,
                                format = "%Y-%m-%d %H:%M:%S")

# separate call date/time into their own columns
HPS <- raw_HPS |> extract(CallReceivedDateTime, into = c("Call_Date", "Call_Time"), "(\\S+)\\s*(.*)") |>
  
                  # separate the call year, month, and day into separate columns
                  mutate(Call_Year = year(Call_Date),
                         Call_Month = month(Call_Date),
                         Call_Day = day(Call_Date))
```

# Calculate proportion of calls by gender

```{r}
#| label: by_gender

# Count number of calls from each gender
n_HPS <- nrow(HPS)
n_HPS_F <- length(which(HPS$Gender == "F"))
n_HPS_M <- length(which(HPS$Gender == "M"))
n_HPS_X <- length(which(HPS$Gender == "X"))
n_HPS_NA <- length(which(is.na(HPS$Gender)))

# Calculate proportions
prop_HPS_F <- n_HPS_F / n_HPS # 0.5349
prop_HPS_M <- n_HPS_M / n_HPS # 0.4651
prop_HPS_X <- n_HPS_X / n_HPS # 0
prop_HPS_NA <- n_HPS_NA / n_HPS # 0
```








